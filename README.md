# Assignment 3 - The Book Corner: Online Book Shop (Shop Owner / Employee Site)

## A) Summary 
- The goal of this project is to create an online e-commerce shop which sells books
- Create a management system for the shop’s owner / employees to perform CRUD operations on books, customer orders and related data
- Deployed URL: https://dashboard.heroku.com/apps/tgc-dl-the-book-corner

## B) UI / UX
- User Stories (Shop Owner / Employees)
    1. As a shop owner / manager / employee, I want to view the available books and their related information I have in the database so that I can prepare reports / advise customers etc.
    2. As a shop owner / manager, I want to add new books and their related information so that I can provide more books to customers / make more money.
    3. As a shop owner / manager, I want to update the information about books and their related information e.g. tags , so that I can correct mistakes / update cover art / ensure the most updated information is provided to customers
    4. As a shop owner / manager, I want to delete books and their related information so that I can remove unavailable books from the database.
    5. As a shop owner / manager / employee, I want to filter books by title and other criteria so that I can view / update / delete a specific book easily.
    6. As a shop owner, I want to create new users and limit the functions available to them based on the role I assign them so that more employees can access the website while still maintaining control.
    7. As shop owner, I want my employees to be able to log in / out of the site so that all information in the database can only be accessed by those with a valid username / password.

- ER diagram
    - ![Screenshot 2021-11-21 at 3 38 06 PM](https://user-images.githubusercontent.com/84578312/143675809-8154f1f4-e706-4390-a6ae-3377616c4c92.png)

- User Roles Diagram
    - ![Screenshot 2021-11-27 at 5 32 53 PM](https://user-images.githubusercontent.com/84578312/143675920-c343dd91-bb5f-4c4a-be1c-881d9e7fd28e.png)

- Choice of colour and fonts
    - Sans Serif font as it is easy to read 
    - Dark Navbar against a white background makes the text based information easy for the user to absorb and stands out to the user
    - Table format used to organise information makes it easy to contain alot of information in a organized and compact space

## C) Use Cases / Feature List
|   Use Case                                                                                                                                            |   Objective (from user’s POV)                                                                                                                                  |   Steps                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |   |   |
|-------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---|---|
|   Register as the owner   (landing page if there are no users)                                                                                        |   Create an account to access the website                                                                                                                      |   1. Fill up register form, which is    2. Click Submit                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |   |   |
|   Logging In and Out    (Landing page if there are users)                                                                                             |   Access information on books, customer orders etc.                                                                                                            |   1. Key in valid email and password      2. Click login button                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |   |   |
|   Performing CRUD on Books                                                                                                                            |   Create Book                                                Update Book                                    Delete Book /  Authors / Tags / Publisher / Genre  |   1. Click on the add book button above the table      2. Fill up the inputs       3. Ensure no error message is shown      4. Click submit      5. A message should be flashed indicating the outcome      6. Repeat the previous steps for the other tabs to add a new row (except for orders)            1. Click the update button which is available within each row of the table      2. Fill up the inputs with the new info      3. Click Submit      4. A message should be flashed indicating the outcome            1. Click the delete button which is available within each row of the table      2. Click yes to confirm delete      3. A message should be flashed indicating the outcome      2b. Click no to cancel and go back to books tab      NOTE:    1. An Author / Publisher / Genre cannot be deleted if there are existing books which have those authors / publisher / genre      2. A book cannot be deleted if it is in a customer’s shopping cart or if there have been purchases of the book made         |   |   |
|   Performing CRUD on Users   (Only available for user with a Owner role)                                                                              |   Create User                                    Update User                                    Delete User                                                    |   1. Click create user button in the users tab      2. Fill up the inputs and make sure no error messages      3. Submit      4. A message should be flashed indicating the outcome            1. Click the update button which is available within each row of the table      2. Fill up the inputs with the new info      3. Click Submit      4. A message should be flashed indicating the outcome            1. Click the delete button which is available within each row of the table      2. Click yes to confirm delete      3. A message should be flashed indicating the outcome      2b. Click no to cancel and go back to users tab                                                                                                                                                                                                                                                                                                                                                                                         |   |   |
|   Filtering Books by a set criteria                                                                                                                   |   Search for a book by title / keyword               Filter books by price range                Filter books by published date                                 |   1. Go to the books tab      2. Type in the title / keyword of the book e.g. Harry Potter         1. Type in a minimum price      2. Type in a maximum price         1. Type in a date range in the 2 input boxes      2. E.g. 12/11/2021 to 20/11/2021                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |   |   |
|   Viewing Authors, Genres, Publishers, Tags                                                                                                           |   To see all the related information that can be inputted into a book                                                                                          |   1. Click on the corresponding tab in the Nav Bar at the top of the page      2. When the user is viewing a tab, that tab will be a light blue colour                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |   |   |
|   Adding Authors, Genres, Publishers, Tags                                                                                                            |   To create new input selection for books                                                                                                                      |   1. Go to the respective tab.      2. Click on the add button.      3. Type in the name.      4. Click Submit.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |   |   |
|   Deleting Author, Genres, Publishers, Tags, Orders      NOTE: Author, Genre, Publisher cannot be deleted if there are existing books with that data  |   To remove the associated input selection for books                                                                                                           |   1. Click the delete button which is available within each row of the table      2. Click yes to confirm delete      3. A message should be flashed indicating the outcome      2b. Click no to cancel and go back to the previous page                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |   |   |
|   Updating own user account                                                                                                                           |   Change username, email and / or password                                                                                                                     |   1. Click on my account tab on right hand side of the Nav Bar      2. Chick Update account details      3. Fill in new information      4. Click Submit                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |   |   |
|   Searching for an order using a set criteria                                                                                                         |   Find a specific order / Find a specific customer’s orders                                                                                                    |   1. Go to the orders tab      2. In the filter search section, key in a order ID to find an order by that order ID      3. Key in a customer ID to find orders with that customer ID      4. Key in a customer username to find orders with that username      5. Key in a date range to see orders created within that date range      6. Click submit to see the results      7. Click on details on each row to see the corresponding order items                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |   |   |
|   Updating Order Status                                                                                                                               |   Update order status to shipped, processing, completed                                                                                                        |   1. Click to the orders tab      2. Click update button to update a specific order      3. Select a correct status from the dropdown      4. Click update                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |   |   |
|   Deleting an order                                                                                                                                   |   Delete completed orders                                                                                                                                      |   1. Click on the orders tab      2. Click delete button to delete a specific order      3. Click yes to confirm delete      4. Click no to cancel and go back to orders tab                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |   |   |

## D) Testing
|   Test Case  |   Test Case Description                                                                                                             |   Test Steps                                                                                                                                                                                                                                                                                    |   Expected Result                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|--------------|-------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|   1.         |   Test that owner can create an account and log In                                                                                  |   1. Fill up register form and submit      1. Fill up login form and submit                                                                                                                                                                                                                     |   1. User is directed to login page      2. User is logged in and directed the books tab.      2. An alert notifies the user he/she is logged in                                                                                                                                                                                                                                                                                                                                                                                                     |
|   2.         |   Test that the shop owner can create users, update and delete other users      NOTE: other user roles cannot do this               |   1. Go to user tab click add user button.      2. Fill up the form and submit                                                                                                                                                                                                                  |   1. Owner is directed to create user form      2. Owner is notified that a new user has been created      3. The new user can then login and access the functions that are available to his/her role given                                                                                                                                                                                                                                                                                                                                          |
|   3.         |   Test that employees can only view data but do not have access to create, update and delete functions                              |   1. User with role of an employee logs in, goes to the user tab and click add user button      2. Employee clicks on update user and delete user button                                                                                                                                        |   1. The employee is not directed to the create user form, and is notified that he cannot access that function      2. Employee is notified that he cannot access that function each time                                                                                                                                                                                                                                                                                                                                                            |
|   4.         |   Test that managers and owners can do create, update and delete operations on all data (except for users which is only for owner)  |   1. Manager logs in and goes to books tab, clicks on add book button      2. Manager submits the form         3. Manager clicks on the update button             4. Manager clicks on the delete button            5. Repeat for the other data   NOTE: some tabs do not have update function  |   1. Manager is directed to create book form         2. Manager is directed back to the previous tab and is notified that a new book has been added. The new book can be seen in the table      3. Manager is directed to update book form and submits. He/she is directed to the previous tab and notified that the book has been updated. The update book information can been seen.      4. Manager is directed to the confirm delete page and clicks yes.He/she is directed to the previous tab and notified that the book has been deleted.     |
|   5.         |   Test that all users can perform filter and search function on books data                                                          |   1. Go to the books tab. Type in a book title in the search filter and click submit      2. Repeat for the rest of the criteria                                                                                                                                                                |   1. Only the book with that title should be visible         2. Only books with matching the criteria specified will be visible                                                                                                                                                                                                                                                                                                                                                                                                                      |
|   6.         |   Test that all users can perform filter and search function on orders data                                                         |   1. Go to the orders tab. Type in a customer username in the search filter and click submit      2. Repeat for the rest of the criteria                                                                                                                                                        |   1. Only order made by that customer should be visible         2. Only order with matching the criteria specified will be visible                                                                                                                                                                                                                                                                                                                                                                                                                   |
|   7.         |   Test that all routes are protected except for login page                                                                          |   1. User tries to access  https://dashboard.heroku.com/apps/tgc-dl-the-book-corner/books when they are not logged in                                                                                                                                                                           |   1. User is directed back to the login page and is notifies that he cannot access that page without logging in                                                                                                                                                                                                                                                                                                                                                                                                                                      |

## E) Technologies Used & Resources
- Express 
- Db-migrate
- Bookshelf.js
- Caolan Form
- Express Handlebars
- Stripe
- Bootstrap 5

Resources:
- Navbar active styling
    - https://stackoverflow.com/questions/50875677/using-express-handlebars-how-can-i-set-an-item-to-active-from-my-navigation-bar
- Markdown Table Generator
    - https://www.tablesgenerator.com/markdown_tables

